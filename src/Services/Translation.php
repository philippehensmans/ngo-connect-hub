<?php

namespace App\Services;

/**
 * Service de gestion des traductions
 */
class Translation
{
    private const TRANSLATIONS = [
        'fr' => [
            'settings' => 'Paramètres',
            'org_name' => 'Nom Organisation',
            'current_pass' => 'Mot de passe actuel',
            'new_pass' => 'Nouveau mot de passe',
            'save_settings' => 'Mettre à jour',
            'app' => 'ONG Manager',
            'login' => 'Connexion',
            'pass' => 'Mot de passe',
            'team' => 'Équipe',
            'proj' => 'Projets',
            'view_all' => 'Voir tout',
            'search' => 'Rechercher',
            'reset' => 'Reset',
            'new_proj' => 'Nouveau Projet',
            'edit_proj' => 'Éditer Projet',
            'new_task' => 'Nouvelle Tâche',
            'new_milestone' => 'Nouveau Jalon',
            'new_group' => 'Nouveau Groupe',
            'groups' => 'Groupes',
            'edit' => 'Éditer',
            'del' => 'Supprimer',
            'save' => 'Enregistrer',
            'cancel' => 'Annuler',
            'close' => 'Fermer',
            'create' => 'Créer',
            'title' => 'Titre',
            'desc' => 'Description',
            'resp' => 'Responsable',
            'status' => 'Statut',
            'prio' => 'Priorité',
            'start' => 'Début',
            'end' => 'Fin',
            'link' => 'Lien',
            'tags' => 'Tags',
            'deps' => 'Dépendances',
            'no_grp' => 'Aucun Groupe',
            'global' => 'Vue Globale',
            'dashboard' => 'Tableau de Bord',
            'list' => 'Liste',
            'kanban' => 'Kanban',
            'gantt' => 'Gantt',
            'calendar' => 'Calendrier',
            'milestones' => 'Jalons',
            'tree' => 'Arbo',
            'confirm' => 'Sûr ?',
            'no_task' => 'Aucune tâche',
            'todo' => 'À faire',
            'wip' => 'En cours',
            'done' => 'Terminé',
            'err_login' => 'Erreur login',
            'conflict' => 'Conflit',
            'backup' => 'Backup',
            'ms_dep' => 'Dépend du Jalon',
            't_dep' => 'Dépend des Tâches',
            'select_project' => 'Sélectionnez un projet',
            'no_date' => 'Pas de dates',
            'tasks_count' => 'tâches',
            'filter_resp' => 'Resp: Tous',
            'filter_status' => 'Statut: Tous',
            'filter_tags' => 'Tags: Tous',
            'reset_db' => 'Réinitialiser l\'application (Efface TOUT)',
            'total_tasks' => 'Total Tâches',
            'completed' => 'Terminées',
            'progress' => 'Progression',
            'tasks_by_status' => 'Tâches par Statut',
            'tasks_by_project' => 'Tâches par Projet',
            'upcoming_week' => 'À venir cette semaine',
            'no_upcoming' => 'Aucune tâche à venir cette semaine',
            'tasks_by_assignee' => 'Tâches par Responsable',
            'tasks_label' => 'Tâches',
            'assistant' => 'Assistant',
            'ai_assistant' => 'Assistant IA',
            'start_conversation' => 'Nouvelle conversation',
            'send_message' => 'Envoyer',
            'generate_structure' => 'Générer la structure',
            'typing' => 'L\'assistant écrit...',
            'conversation_history' => 'Historique',
            'new_conversation' => 'Nouvelle conversation',
            'delete_conversation' => 'Supprimer la conversation',
            'assistant_placeholder' => 'Écrivez votre message...',
            'assistant_welcome' => 'Bienvenue sur l\'assistant de planification',
            'generating' => 'Génération en cours...',
            'structure_generated' => 'Structure générée avec succès',
            'ai_config' => 'Configuration Assistant IA',
            'ai_use_api' => 'Utiliser une API externe',
            'ai_provider' => 'Fournisseur',
            'ai_api_key' => 'Clé API',
            'ai_model' => 'Modèle (optionnel)',
            'ai_test_connection' => 'Tester la connexion',
            'ai_mode_rules' => 'Mode gratuit (règles)',
            'ai_mode_api' => 'Mode API (payant)',
            'export_calendar' => 'Exporter calendrier',
            'export_project_calendar' => 'Exporter ce projet',
            'export_team_calendar' => 'Exporter tous les projets',
            'download_ics' => 'Télécharger .ics',
        ],
        'en' => [
            'settings' => 'Settings',
            'org_name' => 'Organization Name',
            'current_pass' => 'Current Password',
            'new_pass' => 'New Password',
            'save_settings' => 'Update',
            'app' => 'NGO Manager',
            'login' => 'Login',
            'pass' => 'Password',
            'team' => 'Team',
            'proj' => 'Projects',
            'view_all' => 'View All',
            'search' => 'Search',
            'reset' => 'Reset',
            'new_proj' => 'New Project',
            'edit_proj' => 'Edit Project',
            'new_task' => 'New Task',
            'new_milestone' => 'New Milestone',
            'new_group' => 'New Group',
            'groups' => 'Groups',
            'edit' => 'Edit',
            'del' => 'Delete',
            'save' => 'Save',
            'cancel' => 'Cancel',
            'close' => 'Close',
            'create' => 'Create',
            'title' => 'Title',
            'desc' => 'Description',
            'resp' => 'Assignee',
            'status' => 'Status',
            'prio' => 'Priority',
            'start' => 'Start',
            'end' => 'End',
            'link' => 'Link',
            'tags' => 'Tags',
            'deps' => 'Dependencies',
            'no_grp' => 'No Group',
            'global' => 'Global',
            'dashboard' => 'Dashboard',
            'list' => 'List',
            'kanban' => 'Kanban',
            'gantt' => 'Gantt',
            'calendar' => 'Calendar',
            'milestones' => 'Milestones',
            'tree' => 'Tree',
            'confirm' => 'Sure?',
            'no_task' => 'No tasks',
            'todo' => 'To Do',
            'wip' => 'In Progress',
            'done' => 'Done',
            'err_login' => 'Login error',
            'conflict' => 'Conflict',
            'backup' => 'Backup',
            'ms_dep' => 'Depends Milestone',
            't_dep' => 'Depends Tasks',
            'select_project' => 'Select project',
            'no_date' => 'No dates',
            'tasks_count' => 'tasks',
            'filter_resp' => 'Resp: All',
            'filter_status' => 'Status: All',
            'filter_tags' => 'Tags: All',
            'reset_db' => 'Reset App (Wipe ALL)',
            'total_tasks' => 'Total Tasks',
            'completed' => 'Completed',
            'progress' => 'Progress',
            'tasks_by_status' => 'Tasks by Status',
            'tasks_by_project' => 'Tasks by Project',
            'upcoming_week' => 'Upcoming this week',
            'no_upcoming' => 'No upcoming tasks this week',
            'tasks_by_assignee' => 'Tasks by Assignee',
            'tasks_label' => 'Tasks',
            'assistant' => 'Assistant',
            'ai_assistant' => 'AI Assistant',
            'start_conversation' => 'New conversation',
            'send_message' => 'Send',
            'generate_structure' => 'Generate structure',
            'typing' => 'Assistant is typing...',
            'conversation_history' => 'History',
            'new_conversation' => 'New conversation',
            'delete_conversation' => 'Delete conversation',
            'assistant_placeholder' => 'Type your message...',
            'assistant_welcome' => 'Welcome to the planning assistant',
            'generating' => 'Generating...',
            'structure_generated' => 'Structure generated successfully',
            'ai_config' => 'AI Assistant Configuration',
            'ai_use_api' => 'Use external API',
            'ai_provider' => 'Provider',
            'ai_api_key' => 'API Key',
            'ai_model' => 'Model (optional)',
            'ai_test_connection' => 'Test connection',
            'ai_mode_rules' => 'Free mode (rules)',
            'ai_mode_api' => 'API mode (paid)',
            'export_calendar' => 'Export calendar',
            'export_project_calendar' => 'Export this project',
            'export_team_calendar' => 'Export all projects',
            'download_ics' => 'Download .ics',
        ],
        'es' => [
            'settings' => 'Ajustes',
            'org_name' => 'Nombre Org.',
            'current_pass' => 'Contraseña actual',
            'new_pass' => 'Nueva contraseña',
            'save_settings' => 'Actualizar',
            'app' => 'Gestor ONG',
            'login' => 'Entrar',
            'pass' => 'Contraseña',
            'team' => 'Equipo',
            'proj' => 'Proyectos',
            'view_all' => 'Ver todo',
            'search' => 'Buscar',
            'reset' => 'Reset',
            'new_proj' => 'Nuevo Proy.',
            'edit_proj' => 'Editar Proy.',
            'new_task' => 'Nueva Tarea',
            'new_milestone' => 'Nuevo Hito',
            'new_group' => 'Nuevo Grupo',
            'groups' => 'Grupos',
            'edit' => 'Editar',
            'del' => 'Eliminar',
            'save' => 'Guardar',
            'cancel' => 'Cancelar',
            'close' => 'Cerrar',
            'create' => 'Crear',
            'title' => 'Título',
            'desc' => 'Descripción',
            'resp' => 'Responsable',
            'status' => 'Estado',
            'prio' => 'Prioridad',
            'start' => 'Inicio',
            'end' => 'Fin',
            'link' => 'Enlace',
            'tags' => 'Tags',
            'deps' => 'Dependencias',
            'no_grp' => 'Sin Grupo',
            'global' => 'Global',
            'dashboard' => 'Panel',
            'list' => 'Lista',
            'kanban' => 'Kanban',
            'gantt' => 'Gantt',
            'calendar' => 'Calendario',
            'milestones' => 'Hitos',
            'tree' => 'Árbol',
            'confirm' => 'Seguro?',
            'no_task' => 'Sin tareas',
            'todo' => 'Pendiente',
            'wip' => 'En curso',
            'done' => 'Hecho',
            'err_login' => 'Error login',
            'conflict' => 'Conflicto',
            'backup' => 'Backup',
            'ms_dep' => 'Depende Hito',
            't_dep' => 'Depende Tareas',
            'select_project' => 'Seleccionar proyecto',
            'no_date' => 'Sin fechas',
            'tasks_count' => 'tareas',
            'filter_resp' => 'Resp: Todos',
            'filter_status' => 'Est: Todos',
            'filter_tags' => 'Tags: Todos',
            'reset_db' => 'Reiniciar App (Borrar TODO)',
            'total_tasks' => 'Total Tareas',
            'completed' => 'Completadas',
            'progress' => 'Progreso',
            'tasks_by_status' => 'Tareas por Estado',
            'tasks_by_project' => 'Tareas por Proyecto',
            'upcoming_week' => 'Próximas esta semana',
            'no_upcoming' => 'No hay tareas próximas esta semana',
            'tasks_by_assignee' => 'Tareas por Responsable',
            'tasks_label' => 'Tareas',
            'assistant' => 'Asistente',
            'ai_assistant' => 'Asistente IA',
            'start_conversation' => 'Nueva conversación',
            'send_message' => 'Enviar',
            'generate_structure' => 'Generar estructura',
            'typing' => 'El asistente está escribiendo...',
            'conversation_history' => 'Historial',
            'new_conversation' => 'Nueva conversación',
            'delete_conversation' => 'Eliminar conversación',
            'assistant_placeholder' => 'Escribe tu mensaje...',
            'assistant_welcome' => 'Bienvenido al asistente de planificación',
            'generating' => 'Generando...',
            'structure_generated' => 'Estructura generada con éxito',
            'ai_config' => 'Configuración Asistente IA',
            'ai_use_api' => 'Usar API externa',
            'ai_provider' => 'Proveedor',
            'ai_api_key' => 'Clave API',
            'ai_model' => 'Modelo (opcional)',
            'ai_test_connection' => 'Probar conexión',
            'ai_mode_rules' => 'Modo gratuito (reglas)',
            'ai_mode_api' => 'Modo API (pago)',
            'export_calendar' => 'Exportar calendario',
            'export_project_calendar' => 'Exportar este proyecto',
            'export_team_calendar' => 'Exportar todos los proyectos',
            'download_ics' => 'Descargar .ics',
        ],
        'sl' => [
            'settings' => 'Nastavitve',
            'org_name' => 'Ime organizacije',
            'current_pass' => 'Trenutno geslo',
            'new_pass' => 'Novo geslo',
            'save_settings' => 'Posodobi',
            'app' => 'Upravitelj NVO',
            'login' => 'Prijava',
            'pass' => 'Geslo',
            'team' => 'Ekipa',
            'proj' => 'Projekti',
            'view_all' => 'Poglej vse',
            'search' => 'Iskanje',
            'reset' => 'Ponastavi',
            'new_proj' => 'Nov projekt',
            'edit_proj' => 'Uredi projekt',
            'new_task' => 'Nova naloga',
            'new_milestone' => 'Nov mejnik',
            'new_group' => 'Nova skupina',
            'groups' => 'Skupine',
            'edit' => 'Uredi',
            'del' => 'Izbriši',
            'save' => 'Shrani',
            'cancel' => 'Prekliči',
            'close' => 'Zapri',
            'create' => 'Ustvari',
            'title' => 'Naslov',
            'desc' => 'Opis',
            'resp' => 'Odgovorni',
            'status' => 'Status',
            'prio' => 'Prioriteta',
            'start' => 'Začetek',
            'end' => 'Konec',
            'link' => 'Povezava',
            'tags' => 'Oznake',
            'deps' => 'Odvisnosti',
            'no_grp' => 'Brez skupine',
            'global' => 'Globalno',
            'dashboard' => 'Nadzorna plošča',
            'list' => 'Seznam',
            'kanban' => 'Kanban',
            'gantt' => 'Gantt',
            'calendar' => 'Kalendar',
            'milestones' => 'Mejniki',
            'tree' => 'Drevo',
            'confirm' => 'Prepričani?',
            'no_task' => 'Ni nalog',
            'todo' => 'Za narediti',
            'wip' => 'V teku',
            'done' => 'Končano',
            'err_login' => 'Napaka',
            'conflict' => 'Konflikt',
            'backup' => 'Varnostna kopija',
            'ms_dep' => 'Odvisno mejnik',
            't_dep' => 'Odvisno naloge',
            'select_project' => 'Izberi projekt',
            'no_date' => 'Ni datumov',
            'tasks_count' => 'nalog',
            'filter_resp' => 'Odg: Vsi',
            'filter_status' => 'St: Vsi',
            'filter_tags' => 'Ozn: Vse',
            'reset_db' => 'Ponastavi App (Izbriši VSE)',
            'total_tasks' => 'Skupaj Nalog',
            'completed' => 'Končano',
            'progress' => 'Napredek',
            'tasks_by_status' => 'Naloge po Statusu',
            'tasks_by_project' => 'Naloge po Projektu',
            'upcoming_week' => 'Prihajajoče ta teden',
            'no_upcoming' => 'Ni prihodnjih nalog ta teden',
            'tasks_by_assignee' => 'Naloge po Odgovornem',
            'tasks_label' => 'Naloge',
            'assistant' => 'Asistent',
            'ai_assistant' => 'AI Asistent',
            'start_conversation' => 'Nov pogovor',
            'send_message' => 'Pošlji',
            'generate_structure' => 'Generiraj strukturo',
            'typing' => 'Asistent piše...',
            'conversation_history' => 'Zgodovina',
            'new_conversation' => 'Nov pogovor',
            'delete_conversation' => 'Izbriši pogovor',
            'assistant_placeholder' => 'Vpiši svoje sporočilo...',
            'assistant_welcome' => 'Dobrodošli v načrtovalnem asistentu',
            'generating' => 'Generiranje...',
            'structure_generated' => 'Struktura uspešno generirana',
            'ai_config' => 'Konfiguracija AI Asistenta',
            'ai_use_api' => 'Uporabi zunanji API',
            'ai_provider' => 'Ponudnik',
            'ai_api_key' => 'API ključ',
            'ai_model' => 'Model (izbirno)',
            'ai_test_connection' => 'Testiraj povezavo',
            'ai_mode_rules' => 'Brezplačni način (pravila)',
            'ai_mode_api' => 'API način (plačljiv)',
            'export_calendar' => 'Izvozi koledar',
            'export_project_calendar' => 'Izvozi ta projekt',
            'export_team_calendar' => 'Izvozi vse projekte',
            'download_ics' => 'Prenesi .ics',
        ],
    ];

    private string $currentLang;

    public function __construct(string $lang = 'fr')
    {
        $this->currentLang = $lang;
    }

    /**
     * Traduit une clé
     */
    public function translate(string $key): string
    {
        return self::TRANSLATIONS[$this->currentLang][$key] ?? $key;
    }

    /**
     * Définit la langue courante
     */
    public function setLanguage(string $lang): void
    {
        if (isset(self::TRANSLATIONS[$lang])) {
            $this->currentLang = $lang;
        }
    }

    /**
     * Obtient la langue courante
     */
    public function getLanguage(): string
    {
        return $this->currentLang;
    }

    /**
     * Obtient toutes les traductions pour la langue courante
     */
    public function getAll(): array
    {
        return self::TRANSLATIONS[$this->currentLang] ?? [];
    }
}
